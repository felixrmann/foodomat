generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model PlanEntity {
  id           Int            @id @default(autoincrement())
  date         DateTime
  recipeEntity RecipeEntity[]
}

model RecipeEntity {
  id          Int                        @id @default(autoincrement())
  name        String                     @unique
  manual      String
  image       Bytes                      @db.ByteA
  src         String
  ingredients IngredientInRecipeEntity[]
  planable    PlanEntity[]
}

model IngredientInRecipeEntity {
  recipeId    Int
  ingredintId Int
  amount      Int
  ingredient  IngredientEntity @relation(fields: [ingredintId], references: [id])
  recipe      RecipeEntity     @relation(fields: [recipeId], references: [id])

  @@id([recipeId, ingredintId])
}

model IngredientEntity {
  id      Int                        @id @default(autoincrement())
  name    String                     @unique
  unit    String
  recipes IngredientInRecipeEntity[]
}
